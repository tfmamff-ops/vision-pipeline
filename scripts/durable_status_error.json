{
  "name": "orchestrator",
  "instanceId": "d48cd615a40a4468a25cad5081a90b75",
  "runtimeStatus": "Failed",
  "input": "{\"container\": \"input\", \"blobName\": \"uploads/2459fe47-b530-443a-ab49-8eb50c798c2e.png\", \"expectedData\": {\"packDate\": \"E JUL/2025\", \"lot\": \"S 101144\", \"expDate\": \"V JUL/2027\"}, \"requestContext\": {\"user\": {\"name\": \"Bob Operator\", \"id\": \"auth0|9a0812ffb13\", \"email\": \"operator.qa@lab.com\", \"role\": \"qa_operator\"}, \"client\": {\"appVersion\": \"web-1.0.0\", \"userAgent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64)\", \"ip\": \"127.0.0.1\"}}}",
  "customStatus": {
    "stage": "persisting_run"
  },
  "output": "Orchestrator function 'orchestrator' failed: Activity function 'persist_run' failed:  UndefinedTable: relation \"vision_pipeline_log\" does not exist\nLINE 2:     INSERT INTO vision_pipeline_log (\n                        ^ \n {\"$type\":\"System.Exception, System.Private.CoreLib\",\"ClassName\":\"System.Exception\",\"Message\":\" UndefinedTable: relation \\\"vision_pipeline_log\\\" does not exist\\nLINE 2:     INSERT INTO vision_pipeline_log (\\n                        ^\",\"Data\":null,\"InnerException\":{\"$type\":\"Microsoft.Azure.WebJobs.Script.Workers.Rpc.RpcException, Microsoft.Azure.WebJobs.Script\",\"IsUserException\":false,\"RemoteStackTrace\":\"  File \\\"/azure-functions-host/workers/python/3.11/LINUX/X64/azure_functions_worker/dispatcher.py\\\", line 680, in _handle__invocation_request\\n    call_result = await self._loop.run_in_executor(\\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/usr/local/lib/python3.11/concurrent/futures/thread.py\\\", line 58, in run\\n    result = self.fn(*self.args, **self.kwargs)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/azure-functions-host/workers/python/3.11/LINUX/X64/azure_functions_worker/dispatcher.py\\\", line 1011, in _run_sync_func\\n    return ExtensionManager.get_sync_invocation_wrapper(context,\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/azure-functions-host/workers/python/3.11/LINUX/X64/azure_functions_worker/extension.py\\\", line 211, in _raw_invocation_wrapper\\n    result = function(**args)\\n             ^^^^^^^^^^^^^^^^\\n  File \\\"/home/site/wwwroot/persist_run/__init__.py\\\", line 154, in main\\n    cur.execute(sql, params)\\n  File \\\"/home/site/wwwroot/.python_packages/lib/site-packages/psycopg/cursor.py\\\", line 97, in execute\\n    raise ex.with_traceback(None)\\n\",\"RemoteMessage\":\"UndefinedTable: relation \\\"vision_pipeline_log\\\" does not exist\\nLINE 2:     INSERT INTO vision_pipeline_log (\\n                        ^\",\"RemoteTypeName\":null,\"Message\":\"Result: Failure\\nException: UndefinedTable: relation \\\"vision_pipeline_log\\\" does not exist\\nLINE 2:     INSERT INTO vision_pipeline_log (\\n                        ^\\nStack:   File \\\"/azure-functions-host/workers/python/3.11/LINUX/X64/azure_functions_worker/dispatcher.py\\\", line 680, in _handle__invocation_request\\n    call_result = await self._loop.run_in_executor(\\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/usr/local/lib/python3.11/concurrent/futures/thread.py\\\", line 58, in run\\n    result = self.fn(*self.args, **self.kwargs)\\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/azure-functions-host/workers/python/3.11/LINUX/X64/azure_functions_worker/dispatcher.py\\\", line 1011, in _run_sync_func\\n    return ExtensionManager.get_sync_invocation_wrapper(context,\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/azure-functions-host/workers/python/3.11/LINUX/X64/azure_functions_worker/extension.py\\\", line 211, in _raw_invocation_wrapper\\n    result = function(**args)\\n             ^^^^^^^^^^^^^^^^\\n  File \\\"/home/site/wwwroot/persist_run/__init__.py\\\", line 154, in main\\n    cur.execute(sql, params)\\n  File \\\"/home/site/wwwroot/.python_packages/lib/site-packages/psycopg/cursor.py\\\", line 97, in execute\\n    raise ex.with_traceback(None)\\n\",\"Data\":{\"$type\":\"System.Collections.ListDictionaryInternal, System.Private.CoreLib\"},\"InnerException\":null,\"HelpLink\":null,\"Source\":\"System.Private.CoreLib\",\"HResult\":-2146233088,\"StackTrace\":\"   at Microsoft.Azure.WebJobs.Script.Description.WorkerFunctionInvoker.InvokeCore(Object[] parameters, FunctionInvocationContext context) in /_/src/WebJobs.Script/Description/Workers/WorkerFunctionInvoker.cs:line 102\\n   at Microsoft.Azure.WebJobs.Script.Description.FunctionInvokerBase.Invoke(Object[] parameters) in /_/src/WebJobs.Script/Description/FunctionInvokerBase.cs:line 82\\n   at Microsoft.Azure.WebJobs.Script.Description.FunctionGenerator.Coerce[T](Task`1 src) in /_/src/WebJobs.Script/Description/FunctionGenerator.cs:line 225\\n   at Microsoft.Azure.WebJobs.Host.Executors.FunctionInvoker`2.InvokeAsync(Object instance, Object[] arguments) in D:\\\\a\\\\_work\\\\1\\\\s\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionInvoker.cs:line 53\\n   at Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor.InvokeWithTimeoutAsync(IFunctionInvoker invoker, ParameterHelper parameterHelper, CancellationTokenSource timeoutTokenSource, CancellationTokenSource functionCancellationTokenSource, Boolean throwOnTimeout, TimeSpan timerInterval, IFunctionInstance instance) in D:\\\\a\\\\_work\\\\1\\\\s\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs:line 581\\n   at Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor.ExecuteWithWatchersAsync(IFunctionInstanceEx instance, ParameterHelper parameterHelper, ILogger logger, CancellationTokenSource functionCancellationTokenSource) in D:\\\\a\\\\_work\\\\1\\\\s\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs:line 527\\n   at Microsoft.Azure.WebJobs.Host.Executors.FunctionExecutor.ExecuteWithLoggingAsync(IFunctionInstanceEx instance, FunctionStartedMessage message, FunctionInstanceLogEntry instanceLogEntry, ParameterHelper parameterHelper, ILogger logger, CancellationToken cancellationToken) in D:\\\\a\\\\_work\\\\1\\\\s\\\\src\\\\Microsoft.Azure.WebJobs.Host\\\\Executors\\\\FunctionExecutor.cs:line 306\"},\"HelpURL\":null,\"StackTraceString\":null,\"RemoteStackTraceString\":null,\"RemoteStackIndex\":0,\"ExceptionMethod\":null,\"HResult\":-2146233088,\"Source\":null,\"WatsonBuckets\":null}",
  "createdTime": "2025-10-26T00:29:25Z",
  "lastUpdatedTime": "2025-10-26T00:29:28Z"
}
